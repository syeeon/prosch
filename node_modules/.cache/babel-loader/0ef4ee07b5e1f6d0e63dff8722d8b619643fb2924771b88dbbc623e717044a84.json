{"ast":null,"code":"import _regeneratorRuntime from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from\"react-router-dom\";import'styles/page/login.css';import'styles/responsive/reLogin.css';import{signInWithEmailAndPassword,onAuthStateChanged}from\"firebase/auth\";import{auth}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),loginEmail=_useState2[0],setLoginEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),loginPassword=_useState4[0],setLoginPassword=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];useEffect(function(){onAuthStateChanged(auth,function(currentUser){setUser(currentUser);});},[user]);//console.log(user);\nvar navigate=useNavigate();var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signInWithEmailAndPassword(auth,loginEmail,loginPassword);case 3:_user=_context.sent;alert(\"로그인에 성공했습니다.\");navigate('/mypage');console.log(loginEmail);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(\"등록된 정보가 없습니다.\");case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function login(){return _ref.apply(this,arguments);};}();function ch_bg(){if(matchMedia(\"screen and (min-width : 769px\").matches)document.querySelector('.body').style.backgroundImage=\"url(img/login/login_on.jpg)\";};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),emailValid=_useState8[0],setEmailValid=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),pwValid=_useState10[0],setPwValid=_useState10[1];var handleEmail=function handleEmail(e){setLoginEmail(e.target.value);var regex=/^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;if(regex.test(e.target.value)){setEmailValid(true);}else{setEmailValid(false);}};var handlePw=function handlePw(e){setLoginPassword(e.target.value);var regex=/^(?=.*[a-zA-z])(?=.*[0-9])(?=.*[$`~!@$!%*#^?&\\\\(\\\\)\\-_=+])(?!.*[^a-zA-z0-9$`~!@$!%*#^?&\\\\(\\\\)\\-_=+]).{8,20}$/;if(regex.test(e.target.value)){setPwValid(true);}else{setPwValid(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"body container\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"login_box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"legend\",{className:\"hide\",children:\"Porsche Login\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"u_id\",className:\"id_txt\",children:\"Porsche ID(\\uC774\\uBA54\\uC77C \\uC8FC\\uC18C)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"login_input\",id:\"email\",name:\"email\",placeholder:\"porsche@gmail.com\",value:loginEmail,onChange:handleEmail}),/*#__PURE__*/_jsx(\"div\",{id:\"err_message\",className:\"err_txt\",children:!emailValid&&loginEmail.length>0&&/*#__PURE__*/_jsx(\"div\",{children:\"\\uC62C\\uBC14\\uB978 \\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pwd\",className:\"id_txt\",children:\"\\uC554\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"login_input\",id:\"pwd\",name:\"pwd\",placeholder:\"\\uC601\\uBB38, \\uC22B\\uC790, \\uD2B9\\uC218\\uBB38\\uC790 \\uD3EC\\uD568 8\\uC790 \\uC774\\uC0C1\",onChange:handlePw}),/*#__PURE__*/_jsx(\"div\",{id:\"err_message\",className:\"err_txt\",children:!pwValid&&loginPassword.length>0&&/*#__PURE__*/_jsx(\"div\",{children:\"\\uC601\\uBB38, \\uC22B\\uC790, \\uD2B9\\uC218\\uBB38\\uC790 \\uD3EC\\uD568 8\\uC790 \\uC774\\uC0C1 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"id_btn\",onClick:function onClick(){ch_bg();login();},children:\"\\uC9C0\\uAE08 \\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"go_to_join\",children:[/*#__PURE__*/_jsx(Link,{to:\"/join\",children:/*#__PURE__*/_jsx(\"span\",{className:\"go_join_txt\",children:\"\\uC9C0\\uAE08 \\uB4F1\\uB85D\\uD558\\uC138\\uC694\"})}),\", Porsche\\uC758 \\uB514\\uC9C0\\uD138 \\uC138\\uC0C1\\uC744 \\uC54C\\uC544\\uBCF4\\uC138\\uC694.\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"forget_pwd\",children:\"\\uC554\\uD638\\uB97C \\uC78A\\uC5B4\\uBC84\\uB9AC\\uC168\\uB098\\uC694?\"})]})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","signInWithEmailAndPassword","onAuthStateChanged","auth","Login","loginEmail","setLoginEmail","loginPassword","setLoginPassword","user","setUser","currentUser","navigate","login","alert","console","log","ch_bg","matchMedia","matches","document","querySelector","style","backgroundImage","emailValid","setEmailValid","pwValid","setPwValid","handleEmail","e","target","value","regex","test","handlePw","length"],"sources":["/Users/syeeon/Desktop/prosch/src/page/login.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport 'styles/page/login.css';\r\nimport 'styles/responsive/reLogin.css';\r\n\r\nimport {\r\n    signInWithEmailAndPassword,\t\r\n    onAuthStateChanged,\t\t\t\t\t\t\t\t\r\n} from \"firebase/auth\";\r\nimport { auth } from \"../firebase\";\r\n\r\nfunction Login() {\r\n\r\n  const [loginEmail, setLoginEmail] = useState(\"\");\r\n  const [loginPassword, setLoginPassword] = useState(\"\");\r\n  const [user, setUser] = useState({});\r\n    \r\n  useEffect(() => {\r\n    onAuthStateChanged(auth, (currentUser) => { \r\n      setUser(currentUser);\r\n    });\r\n  }, [user]);\r\n    \r\n  //console.log(user);\r\n\r\n  const navigate = useNavigate();\r\n    \r\n  const login = async () => {  \r\n    try {\r\n      const user = await signInWithEmailAndPassword(auth, loginEmail, loginPassword);\r\n      alert(\"로그인에 성공했습니다.\");\r\n      navigate('/mypage');\r\n      console.log(loginEmail)\r\n    } catch (error) {\r\n      alert(\"등록된 정보가 없습니다.\");\r\n    }\r\n  };\r\n    \r\n  function ch_bg(){\r\n    if (matchMedia(\"screen and (min-width : 769px\").matches)\r\n    document.querySelector('.body').style.backgroundImage=\"url(img/login/login_on.jpg)\"\r\n  };\r\n    \r\n  const [emailValid, setEmailValid] = useState(false);\r\n  const [pwValid, setPwValid] = useState(false);\r\n\r\n  const handleEmail = (e) => {\r\n    setLoginEmail(e.target.value);\r\n    const regex = \r\n      /^(([^<>()\\[\\].,;:\\s@\"]+(\\.[^<>()\\[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\r\n    if (regex.test(e.target.value)) {\r\n      setEmailValid(true);\r\n    } else {\r\n      setEmailValid(false)\r\n    }\r\n  };\r\n\r\n  const handlePw = (e) => {\r\n    setLoginPassword(e.target.value);\r\n    const regex = \r\n      /^(?=.*[a-zA-z])(?=.*[0-9])(?=.*[$`~!@$!%*#^?&\\\\(\\\\)\\-_=+])(?!.*[^a-zA-z0-9$`~!@$!%*#^?&\\\\(\\\\)\\-_=+]).{8,20}$/;\r\n    if (regex.test(e.target.value)) {\r\n      setPwValid(true);\r\n    } else {\r\n      setPwValid(false)\r\n    }\r\n  };\r\n  return (\r\n      <div className='body container'>\r\n          <section className=\"login_box\">\r\n            <h2>반갑습니다.</h2>\r\n              <legend className=\"hide\">Porsche Login</legend>\r\n              <label htmlFor=\"u_id\" className=\"id_txt\">Porsche ID(이메일 주소)</label>\r\n              <input \r\n                type=\"email\" \r\n                className=\"login_input\" \r\n                id=\"email\" \r\n                name=\"email\" \r\n                placeholder=\"porsche@gmail.com\" \r\n                value={loginEmail}\r\n                onChange={handleEmail}/>\r\n              <div id=\"err_message\" className=\"err_txt\">\r\n                {!emailValid && loginEmail.length > 0 && (\r\n                  <div>올바른 이메일을 입력해주세요.</div>\r\n                )}\r\n              </div>\r\n              <label htmlFor=\"pwd\" className=\"id_txt\">암호</label>\r\n              <input \r\n                type=\"password\" \r\n                className=\"login_input\" \r\n                id=\"pwd\" \r\n                name=\"pwd\" \r\n                placeholder=\"영문, 숫자, 특수문자 포함 8자 이상\"\r\n                onChange={handlePw}/> \r\n              <div id=\"err_message\" className=\"err_txt\">\r\n                {!pwValid && loginPassword.length > 0 && (\r\n                  <div>영문, 숫자, 특수문자 포함 8자 이상 입력해주세요.</div>\r\n                )}\r\n              </div>\r\n              <button type=\"submit\" className=\"id_btn\" onClick={() => {\r\n                ch_bg()\r\n                login();\r\n              }}>지금 로그인</button>\r\n            <hr className=\"line\" />\r\n            <p className=\"go_to_join\">\r\n            <Link to=\"/join\">\r\n              <span className='go_join_txt'>지금 등록하세요</span>\r\n            </Link>\r\n              , Porsche의 디지털 세상을 알아보세요.\r\n            </p>\r\n            <a href=\"#\" className=\"forget_pwd\">암호를 잊어버리셨나요?</a>\r\n          </section>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}