{"ast":null,"code":"import _regeneratorRuntime from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/syeeon/Desktop/prosch/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from\"react-router-dom\";import'styles/page/mypage.css';import{onAuthStateChanged,signOut,updatePassword}from\"firebase/auth\";import{auth}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MyPage(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pwValid=_useState4[0],setPwValid=_useState4[1];useEffect(function(){onAuthStateChanged(auth,function(currentUser){setUser(currentUser);});},[user]);var navigate=useNavigate();var logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return signOut(auth);case 2:alert('정상적으로 로그아웃 되었습니다.');navigate('/');case 4:case\"end\":return _context.stop();}},_callee);}));return function logout(){return _ref.apply(this,arguments);};}();var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newPassword=_useState6[0],setNewPassword=_useState6[1];var pwdChanged=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:try{if(user){updatePassword(user,newPassword);}else{alert(\"로그인 하세요.\");}}catch(error){console.log(error);}case 1:case\"end\":return _context2.stop();}},_callee2);}));return function pwdChanged(){return _ref2.apply(this,arguments);};}();var handlePw=function handlePw(e){setNewPassword(e.target.value);var regex=/^(?=.*[a-zA-z])(?=.*[0-9])(?=.*[$`~!@$!%*#^?&\\\\(\\\\)\\-_=+])(?!.*[^a-zA-z0-9$`~!@$!%*#^?&\\\\(\\\\)\\-_=+]).{8,20}$/;if(regex.test(e.target.value)){setPwValid(true);}else{setPwValid(false);}};function pwdChange(){document.querySelector('.mw').style.display='block';}function close(){alert(\"비밀번호 변경이 완료됐습니다.\");document.querySelector('.mw').style.display='none';}return/*#__PURE__*/_jsxs(\"main\",{id:\"main\",className:\"container left_p\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mypage_title\",children:\"My Porsche\"}),(user===null||user===void 0?void 0:user.email)==null?/*#__PURE__*/_jsx(\"p\",{className:\"err_login\",children:\"\\uB85C\\uADF8\\uC778 \\uD6C4 \\uC774\\uC6A9\\uC774 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsxs(\"p\",{className:\"user\",children:[user===null||user===void 0?void 0:user.email,\" \\uB2D8 \\uC548\\uB155\\uD558\\uC138\\uC694.\"]}),/*#__PURE__*/_jsx(Link,{className:\"logout_btn\",onClick:logout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}),/*#__PURE__*/_jsx(Link,{className:\"pwd_change_btn\",onClick:pwdChange,children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"reservation_box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Reservation\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uB51C\\uB7EC\\uC640\\uC758 \\uC608\\uC57D\\uC744 \\uD1B5\\uD574 \\uAFC8\\uC758 \\uCC28\\uC778 \\uD3EC\\uB974\\uC250\\uB97C \\uC18C\\uC720\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(Link,{to:\"\",className:\"link_reservation\",children:\"\\uC0C1\\uB2F4 \\uC608\\uC57D\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(Link,{to:\"\",className:\"link_reservation\",children:\"\\uC608\\uC57D \\uC815\\uBCF4 \\uD655\\uC778\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{id:\"mw\",className:\"mw\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg\",name:\"bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fg\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC601\\uBB38, \\uC22B\\uC790, \\uD2B9\\uC218\\uBB38\\uC790 \\uD3EC\\uD568 8\\uC790 \\uC774\\uC0C1\",onChange:handlePw}),/*#__PURE__*/_jsx(\"div\",{id:\"err_message\",className:\"pwd_change_err_txt\",children:!pwValid&&newPassword.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"pwd_change_err_txt\",children:\"\\uC601\\uBB38, \\uC22B\\uC790, \\uD2B9\\uC218\\uBB38\\uC790 \\uD3EC\\uD568 8\\uC790 \\uC774\\uC0C1 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){pwdChanged();close();},children:\" \\uBCC0\\uACBD\\uD558\\uAE30 \"})]})})})]})]});}export default MyPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","onAuthStateChanged","signOut","updatePassword","auth","MyPage","user","setUser","pwValid","setPwValid","currentUser","navigate","logout","alert","newPassword","setNewPassword","pwdChanged","error","console","log","handlePw","e","target","value","regex","test","pwdChange","document","querySelector","style","display","close","email","length"],"sources":["/Users/syeeon/Desktop/prosch/src/page/mypage.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport { Link, useNavigate} from \"react-router-dom\";\n\nimport 'styles/page/mypage.css'\n\nimport {\n    onAuthStateChanged,\t\t\t\n    signOut,\t\t\t\t\t\t\n    updatePassword,\t\t\t\t\t\n  } from \"firebase/auth\";\n  import { auth } from \"../firebase\";\n\n\nfunction MyPage() {\n\n    const [user, setUser] = useState({});\n    const [pwValid, setPwValid] = useState(false);\n\n    useEffect(() => {\n        onAuthStateChanged(auth, (currentUser) => {\n        setUser(currentUser);\n        });\n    }, [user]);\n\n    const navigate = useNavigate();\n\n    const logout = async () => {\n       await signOut(auth); \n       alert('정상적으로 로그아웃 되었습니다.')\n       navigate('/');\n      };   \n\n      const [newPassword, setNewPassword] = useState(\"\");\n\n      const pwdChanged = async () => { \n        try {\n          if (user) {\n            updatePassword(user, newPassword);\n          } else {\n            alert(\"로그인 하세요.\");\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      const handlePw = (e) => {\n        setNewPassword(e.target.value);\n        const regex = \n          /^(?=.*[a-zA-z])(?=.*[0-9])(?=.*[$`~!@$!%*#^?&\\\\(\\\\)\\-_=+])(?!.*[^a-zA-z0-9$`~!@$!%*#^?&\\\\(\\\\)\\-_=+]).{8,20}$/;\n        if (regex.test(e.target.value)) {\n          setPwValid(true);\n        } else {\n          setPwValid(false);\n        }\n      };\n\n      function pwdChange(){\n        document.querySelector('.mw').style.display='block';\n      }\n\n      function close(){\n        alert(\"비밀번호 변경이 완료됐습니다.\");\n        document.querySelector('.mw').style.display='none'\n      }\n  return (\n    <main id=\"main\" className=\"container left_p\">\n       <h1 className='mypage_title'>My Porsche</h1>\n       {\n        user?.email == null\n        ? <p className='err_login'>로그인 후 이용이 가능합니다.</p>\n        : <p className='user'>{user?.email} 님 안녕하세요.</p>\n       }\n        <Link className='logout_btn' onClick={logout}>로그아웃</Link>\n        <Link className='pwd_change_btn' onClick={pwdChange}>비밀번호 변경</Link>\n       <div className='reservation_box'>\n            <h2>My Reservation</h2>\n            <p>딜러와의 예약을 통해 꿈의 차인 포르쉐를 소유하세요</p>\n            <Link to=\"\" className='link_reservation'>상담 예약하기</Link>\n            <Link to=\"\" className='link_reservation'>예약 정보 확인하기</Link>\n            <div id=\"mw\" className='mw'>\n              <div className='bg' name=\"bg\">\n                <div className='fg'>\n                  <h3>비밀번호 변경</h3>\n                  <input\n                    placeholder=\"영문, 숫자, 특수문자 포함 8자 이상\"\n                    onChange={handlePw} />\n                  <div id=\"err_message\" className=\"pwd_change_err_txt\">\n                    {!pwValid && newPassword.length > 0 && (\n                  <div className='pwd_change_err_txt'>영문, 숫자, 특수문자 포함 8자 이상 입력해주세요.</div>\n                )}\n              </div>\n                  <button onClick={() => { pwdChanged(); close(); }}> 변경하기 </button>\n                </div>\n              </div>\n            </div>\n       </div>\n\n    </main>\n  );\n}\n\nexport default MyPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}